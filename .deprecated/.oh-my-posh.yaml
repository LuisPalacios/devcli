# =============================================================================
# Configuraci√≥n personalizada de Oh My Posh - Tema LuisPa
# =============================================================================
# Formato: YAML (permite comentarios y es m√°s legible que JSON)
# Ubicaci√≥n final: ~/.oh-my-posh.json
# Prop√≥sito: Prompt personalizado con informaci√≥n de sistema, Git, estado y colores
# Compatible con: Oh My Posh v3+ en Linux, macOS, WSL2, Windows
# Dependencias: Oh My Posh, Nerd Font (FiraCode recomendada), Git
# =============================================================================

# Validaci√≥n de esquema JSON para autocompletado y validaci√≥n en editores
# yaml-language-server: $schema=https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json

# =============================================================================
# CONFIGURACI√ìN GENERAL DEL PROMPT
# =============================================================================

# A√±adir espacio al final del prompt para separaci√≥n visual
final_space: true

# Versi√≥n del esquema de configuraci√≥n de Oh My Posh
version: 3

# =============================================================================
# PALETA DE COLORES PERSONALIZADA
# =============================================================================
# Define colores reutilizables en toda la configuraci√≥n usando nombres sem√°nticos
# Formato: nombre: "#HEXCODE" - usar siempre c√≥digos hexadecimales de 6 d√≠gitos

palette:
  # Colores base del tema
  black: "#262B44"      # Fondo oscuro principal - usado para fondos y contraste
  white: "#FFFFFF"      # Blanco puro - texto principal y elementos destacados
  whitesoft: "#7f8080"  # Gris suave - texto secundario y elementos discretos

  # Colores de estado y contexto
  blue: "#4B95E9"       # Azul informaci√≥n - Git ahead, elementos informativos
  cyan: "#61fdff"       # Cyan brillante - directorios y rutas de archivos
  green: "#61fd5f"      # Verde √©xito - Git limpio, operaciones exitosas
  yellow: "#F3AE35"     # Amarillo advertencia - resaltados y avisos
  orange: "#F07623"     # Naranja atenci√≥n - Git con cambios, estados mixtos
  red: "#D81E5B"        # Rojo error - errores, Git con conflictos
  morado: "#D91C9A"     # Morado especial - Git behind, estados √∫nicos

# =============================================================================
# CONFIGURACI√ìN DE PROMPTS ESPECIALES
# =============================================================================

# Prompt secundario - aparece en comandos multil√≠nea o cuando se espera m√°s entrada
secondary_prompt:
  template: "</><foreground>\u276f</> "  # S√≠mbolo de continuaci√≥n ‚ùØ
  foreground: "p:white"                  # Color blanco para visibilidad
  background: "transparent"             # Fondo transparente

# Prompt transiente - versi√≥n compacta que reemplaza prompts anteriores
# Mejora el desplazamiento y reduce el desorden visual en el historial
transient_prompt:
  # Mostrar icono espec√≠fico para VSCode en Windows, sino usar variable de entorno
  template: "{{ if and (eq .Env.TERM_PROGRAM \"vscode\") (eq .Env.OS \"Windows_NT\") }}[üíª] {{ else }}[{{ .Env.OMP_OS_ICON }}] {{ end }}<p:cyan>{{ .Folder }}</> <foreground>\u276f</> "
  foreground: "p:whitesoft"             # Texto suave para no distraer
  background: "transparent"             # Fondo transparente

# =============================================================================
# CONFIGURACI√ìN DEL T√çTULO DE CONSOLA
# =============================================================================
# Establece el t√≠tulo de la ventana del terminal con informaci√≥n contextual
console_title_template: "{{ .Shell }} in {{ .Folder }}"

# =============================================================================
# CONFIGURACI√ìN DE ACTUALIZACIONES
# =============================================================================
# Control de notificaciones y actualizaciones autom√°ticas de Oh My Posh
upgrade:
  notice: true          # Mostrar notificaciones de nuevas versiones
  interval: "168h"      # Verificar actualizaciones cada 168 horas (1 semana)
  auto: false           # No actualizar autom√°ticamente (seguridad)
  source: "cdn"         # Usar CDN para verificar versiones (m√°s r√°pido)

# =============================================================================
# BLOQUES PRINCIPALES DEL PROMPT
# =============================================================================
# Los bloques definen la estructura y layout del prompt
# Cada bloque contiene segmentos que muestran informaci√≥n espec√≠fica

blocks:
  # ---------------------------------------------------------------------------
  # BLOQUE PRINCIPAL - PROMPT IZQUIERDO
  # ---------------------------------------------------------------------------
  - type: "prompt"        # Tipo de bloque: prompt principal
    alignment: "left"     # Alineaci√≥n a la izquierda

    # Lista de segmentos que componen el prompt
    segments:

      # -----------------------------------------------------------------------
      # SEGMENTO 1: ICONO DEL SISTEMA OPERATIVO
      # -----------------------------------------------------------------------
      # Muestra un icono que identifica el sistema operativo actual
      - type: "text"              # Segmento de texto est√°tico/din√°mico
        style: "plain"            # Sin decoraciones de powerline
        # L√≥gica condicional: Si estamos en VSCode+Windows muestra üíª, sino usa variable OMP_OS_ICON
        # Esta variable se configura autom√°ticamente en los archivos .zshrc y profile.ps1
        template: "{{ if and (eq .Env.TERM_PROGRAM \"vscode\") (eq .Env.OS \"Windows_NT\") }}[üíª] {{ else }}[{{ .Env.OMP_OS_ICON }}] {{ end }}"

      # -----------------------------------------------------------------------
      # SEGMENTO 2: INFORMACI√ìN DE SESI√ìN (USUARIO@HOST)
      # -----------------------------------------------------------------------
      # Muestra usuario actual, estado SSH si aplica, y nombre del host
      - type: "session"           # Segmento de informaci√≥n de sesi√≥n
        style: "plain"            # Sin decoraciones de powerline
        # Template con formato: [usuario@host] con indicador SSH si corresponde
        template: "<p:white><b>{{ if .SSHSession }}\ueba9 {{ end }}{{ .UserName }}</b><p:whitesoft>@{{ .HostName }}:"
        # \ueba9 = icono SSH nerd font, <b> = negrita, p:color = referencia a paleta

      # -----------------------------------------------------------------------
      # SEGMENTO 3: RUTA DEL DIRECTORIO ACTUAL
      # -----------------------------------------------------------------------
      # Muestra la ruta del directorio de trabajo actual
      - type: "path"              # Segmento de ruta de archivos
        style: "plain"            # Sin decoraciones de powerline
        properties:
          style: "folder"         # Mostrar solo el nombre de la carpeta actual (no ruta completa)
        template: "<p:cyan>{{ .Path }}>"  # Color cyan para destacar la ubicaci√≥n

      # -----------------------------------------------------------------------
      # SEGMENTO 4: INFORMACI√ìN DE GIT
      # -----------------------------------------------------------------------
      # Segmento m√°s complejo: muestra estado detallado del repositorio Git
      - type: "git"               # Segmento de informaci√≥n Git
        style: "powerline"        # Estilo powerline (con conectores visuales)
        properties:
          branch_max_length: 25   # Limitar nombre de branch a 25 caracteres
          fetch_status: true      # Obtener estado remoto (ahead/behind)
          fetch_upstream_icon: true # Mostrar icono del servicio remoto (GitHub, GitLab, etc.)

        # Template complejo con informaci√≥n detallada de Git:
        # - Icono y URL del upstream si existe
        # - Nombre del branch/HEAD actual
        # - Estado del branch (ahead/behind)
        # - Archivos modificados en working directory (\uf044 = icono modificado)
        # - Archivos en staging area (\uf046 = icono staged)
        template: " ({{ if .UpstreamURL }}{{ url .UpstreamIcon .UpstreamURL }} {{ end }}{{ .HEAD }}{{if .BranchStatus }} {{ .BranchStatus }}{{ end }}{{ if .Working.Changed }} \uf044 {{ .Working.String }}{{ end }}{{ if .Staging.Changed }} \uf046 {{ .Staging.String }}{{ end }})"

        # Color base: verde (estado limpio)
        foreground: "p:green"
        background: "transparent"

        # Templates condicionales para cambiar color seg√∫n estado de Git:
        foreground_templates:
          # Naranja si hay cambios en working o staging
          - "{{ if or (.Working.Changed) (.Staging.Changed) }}p:orange{{ end }}"
          # Rojo si est√° tanto ahead como behind (conflicto)
          - "{{ if and (gt .Ahead 0) (gt .Behind 0) }}p:red{{ end }}"
          # Morado si solo est√° behind (necesita pull)
          - "{{ if gt .Behind 0 }}p:morado{{ end }}"
          # Azul si solo est√° ahead (necesita push)
          - "{{ if gt .Ahead 0 }}p:blue{{ end }}"

      # -----------------------------------------------------------------------
      # SEGMENTO 5: C√ìDIGO DE SALIDA Y S√çMBOLO FINAL
      # -----------------------------------------------------------------------
      # Muestra el estado del √∫ltimo comando y el s√≠mbolo de prompt final
      - type: "status"            # Segmento de estado del √∫ltimo comando
        style: "plain"            # Sin decoraciones de powerline
        properties:
          always_enabled: true    # Mostrar siempre, incluso si el comando fue exitoso

        # Template condicional:
        # - Si el c√≥digo de salida > 0: muestra X roja (\uf00d)
        # - Siempre termina con el s√≠mbolo de prompt ‚ùØ (\u276f)
        template: " {{ if gt .Code 0 }}<p:red>\uf00d</> {{ end }}</><foreground>\u276f</>"
        foreground: "p:white"     # Color blanco para el s√≠mbolo final
        background: "transparent" # Fondo transparente

# =============================================================================
# TOOLTIPS CONTEXTUALES
# =============================================================================
# Tooltips que aparecen cuando se escriben ciertos comandos
# Proporcionan informaci√≥n adicional sobre el contexto actual

tooltips:

  # ---------------------------------------------------------------------------
  # TOOLTIP AWS - INFORMACI√ìN DE AMAZON WEB SERVICES
  # ---------------------------------------------------------------------------
  # Se activa al escribir "aws" y muestra el perfil y regi√≥n activos
  - type: "aws"                   # Segmento espec√≠fico para AWS
    style: "diamond"              # Estilo diamante (con bordes redondeados)

    # Configuraci√≥n visual del tooltip
    leading_diamond: "\ue0b0"     # S√≠mbolo inicial del diamante
    trailing_diamond: "\ue0b4"    # S√≠mbolo final del diamante

    # Template: muestra icono AWS + perfil + regi√≥n si est√° configurada
    template: " \ue7ad {{ .Profile }}{{ if .Region }}@{{ .Region }}{{ end }} "

    # Colores del tooltip AWS
    foreground: "p:white"         # Texto blanco
    background: "p:orange"        # Fondo naranja (color corporativo AWS)

    properties:
      display_default: true       # Mostrar incluso si es el perfil por defecto

    # Comandos que activan este tooltip
    tips:
      - "aws"                     # Se activa al escribir "aws"

  # ---------------------------------------------------------------------------
  # TOOLTIP AZURE - INFORMACI√ìN DE MICROSOFT AZURE
  # ---------------------------------------------------------------------------
  # Se activa al escribir "az" y muestra la suscripci√≥n activa
  - type: "az"                    # Segmento espec√≠fico para Azure
    style: "diamond"              # Estilo diamante

    # Configuraci√≥n visual del tooltip
    leading_diamond: "\ue0b0"     # S√≠mbolo inicial del diamante
    trailing_diamond: "\ue0b4"    # S√≠mbolo final del diamante

    # Template: muestra icono Azure + nombre de la suscripci√≥n
    template: " \uebd8 {{ .Name }} "

    # Colores del tooltip Azure
    foreground: "p:white"         # Texto blanco
    background: "p:blue"          # Fondo azul (color corporativo Azure)

    properties:
      display_default: true       # Mostrar incluso si es la suscripci√≥n por defecto

    # Comandos que activan este tooltip
    tips:
      - "az"                      # Se activa al escribir "az"

# =============================================================================
# NOTAS IMPORTANTES PARA EL USUARIO:
# =============================================================================
# 1. Este archivo debe colocarse en ~/.oh-my-posh.json
# 2. Para usar este tema, actualiza tu configuraci√≥n shell:
#    - Zsh: eval "$(oh-my-posh init zsh --config ~/.oh-my-posh.json)"
#    - PowerShell: oh-my-posh init pwsh --config ~/.oh-my-posh.json | Invoke-Expression
#    - Bash: eval "$(oh-my-posh init bash --config ~/.oh-my-posh.json)"
# 3. Requiere una Nerd Font instalada (FiraCode Nerd Font recomendada)
# 4. La variable OMP_OS_ICON debe estar configurada:
#    - Se configura autom√°ticamente en .zshrc y Microsoft.PowerShell_profile.ps1
#    - Valores t√≠picos: üçé (macOS), üêß (Linux), üî≥ (WSL2), ü™ü (Windows)
# 5. Para personalizar colores, modifica la secci√≥n "palette"
# 6. Para a√±adir/quitar segmentos, modifica la lista "segments"
# 7. Los iconos usan Nerd Font symbols: https://www.nerdfonts.com/cheat-sheet
# 8. Para validar la configuraci√≥n: oh-my-posh config validate --config ~/.oh-my-posh.json
# 9. Para previsualizar cambios: oh-my-posh print primary --config ~/.oh-my-posh.json
# =============================================================================